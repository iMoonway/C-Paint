# C-Paint

基于C语言的绘画工具，可以将位置由串口发送，目前正在制作

## 已实现的功能

- [x] 按照固定时间间隔记录鼠标手势
- [x] 支持读取设备管理器中所有的端口(*程序未开放*)
- [x] 支持刷新端口列表(*程序未开放*)
- [x] 实现鼠标手势绘制记录 (*Version 0.2.0*)
- [x] 更灵活的页面(*Version 0.2.0*)

## 程序截图

| 手势录制 | 端口选择(程序未开放) |
|----------|----------|
| ![手势录制](./image/手势录制.png)| ![端口选择](./image/端口选择.png)|

## 程序指南

### 手势文件保存

手势文件的保存位置位于可执行文件同级目录的Data目录下，

文件名为开始绘制的时间戳。

### 数据帧解析

以`0208517d -> (13.3, 38.1)`为例，`->`之前的数据为串口发送的数据，之后为处理以后的数据。

#### 串口发送的数据

##### 笔画的完成度

前两位(本例中为`02`)代表笔画的种类

- **01**:代表笔画的开始。
- **02**:代表笔画进行中。
- **03**:代表笔画结束。

##### 坐标的获取

第3到5位数据(本例中为`085`)与第6到8位数据(本例中为`17d`)可以分别转换为X、Y轴的坐标。

X、Y的坐标不论C-Paint窗口的大小，会被统一映射为0到200中间的值。

> [!CAUTION]
> 当鼠标绘制时，如果移动出绘制边界，边界以外的值将不会被记录。
> 目前也在寻求更好的边界处理模式。

同时，坐标轴的原点为左上角。

关于坐标的转换

1. 将数据转换为10进制(`085` -> `133`)
2. 将转换后的数据除以10(`133` -> `13.3`)
3. 获得了坐标值

| 数据帧 | 02 | 085 | 17d|
|--------|----|-----|----|
| 解析   | 代表这个时间点，笔画仍在进行 | 代表X坐标为13.3 | 代表Y轴坐标为38.1 |

##### 数据时间间隔

文件中的数据是一行一行存储的，实际上不同类型的记录逻辑不一致。

- **01**:当按下鼠标左键时，记录一次。
- **02**:在01和02后50ms，再次记录。
- **03**:在松开鼠标左键时，记录一次

## TODO

- [ ] 实现时间间隔可设置
- [ ] 串口发送功能
- [ ] 更灵活的边界处理

## 已知的问题

欢迎提交[ISSUE](https://github.com/iMoonway/C-Paint/issues)
